(()=>{"use strict";const e=e=>{const t=document.querySelector(".header-wrapper").clientHeight,r=e.getBoundingClientRect().top+document.documentElement.scrollTop-t;window.scrollTo({top:r,behavior:"smooth"})};class t{constructor(e){this._form=e,this._modalCallback=document.querySelector(".modal-callback"),this._modalOverlay=document.querySelector(".modal-overlay")}set display(e){this._modalCallback.style.display=e,this._modalOverlay.style.display=e}resetForm(){this._form.reset(),this._form.querySelectorAll("input").forEach((e=>{e.classList.remove("error")}))}}(()=>{const t=document.querySelector("body"),r=document.querySelector(".header-wrapper"),c=document.getElementById("services"),o=document.querySelector(".up"),l=()=>{const e=r.clientHeight,t=c.getBoundingClientRect().top;o.style.display=t<e?"block":"none"};l(),document.addEventListener("scroll",(()=>{l()})),o.addEventListener("click",(()=>{e(t)}))})(),document.querySelector(".top-menu").addEventListener("click",(t=>{t.preventDefault();const r=t.target.closest("a[href]");let c;if(r){c=r.getAttribute("href");const t=document.querySelector(c);e(t)}})),(()=>{const e=document.querySelector(".accordeon"),t=()=>{[...e.querySelectorAll(".element")].map((e=>{e.classList.remove("active"),e.querySelector(".element-content").style.display="none"}))};e.addEventListener("click",(e=>{const r=e.target.closest(".element:not(.active)"),c=e.target.closest(".element.active");r?(t(),r.classList.add("active"),r.querySelector(".element-content").style.display="block"):c&&e.target.classList.contains("title")&&t()}))})(),(()=>{const e=[...document.querySelector(".top-slider").querySelectorAll(".item")],t=document.querySelector(".top-slider__dots"),r=[...t.querySelectorAll(".top-slider__dots-item")],c={timeout:3e3,active:0};let o;const l=(e=c.active)=>{c.active=e,s(),a()},s=()=>{let t=!1;e.map(((o,l)=>{c.active!==l||t?(o.classList.remove("active"),o.querySelector(".title-h1")&&o.querySelector(".title-h1").classList.add("big"),r[l].classList.remove("active")):(t=!0,o.classList.add("active"),o.querySelector(".title-h1")&&o.querySelector(".title-h1").classList.remove("big"),r[l].classList.add("active"),l<e.length-1?c.active=c.active+1:c.active=0)}))},a=()=>{o=setInterval((()=>{s()}),c.timeout)};l(),t.addEventListener("click",(e=>{const t=e.target.closest(".top-slider__dots-item");if(t){const e=t.getAttribute("data-index");clearInterval(o),l(+e)}}))})(),(()=>{const e=document.querySelector("body"),r=document.querySelector('form[name="form-callback"]'),c=new t(r);e.addEventListener("click",(e=>{(e.target.classList.contains("callback-btn")||e.target.classList.contains("button-services")||e.target.classList.contains("fancyboxModal"))&&(c.display="block"),(e.target.closest(".modal-close")||e.target.closest(".modal-overlay"))&&(c.display="none",c.resetForm())}))})(),(()=>{const e=[...document.querySelectorAll(".services-carousel > div")],t=document.querySelector(".services-arrow"),r=t.querySelector(".arrow-left"),c=t.querySelector(".arrow-right");let o=0;const l=()=>{const e=document.documentElement.clientWidth;return e<768?1:e<992?2:3},s=()=>{const t=l();e.map(((e,r)=>{e.style.display=o+t>r&&r>=o?"block":"none"})),r.style.opacity=0===o?".3":"1",o+l()===e.length?c.style.opacity=".3":c.style.opacity="1"};s(),t.addEventListener("click",(t=>{t.target.classList.contains("arrow-left")&&(t.target,o>0&&(o--,s())),t.target.classList.contains("arrow-right")&&(t.target,o<e.length-l()&&(o++,s()))})),window.addEventListener("resize",(()=>{s()}))})(),(()=>{const e=document.querySelector("input.feedback"),r=document.querySelector('form[name="form-callback"]'),c=r.querySelectorAll("input"),o=/[^а-яА-Я]/gi,l=/[^\d+]/gi,s=new t(r);let a;const n=(t,r="")=>{const c=document.querySelector(".js-message-block"),o=document.createElement("div");switch(clearTimeout(a),o.classList.add("js-message-block"),o.textContent=t,o.style.textAlign="center",o.style.margin="20px 0 0 0",r){case"error":o.style.color="red";break;case"success":o.style.color="green";break;default:o.style.color="grey"}c&&c.remove(),e.insertAdjacentElement("afterend",o),(()=>{const e=document.querySelector(".js-message-block");a=setTimeout((()=>{e&&e.remove()}),3e3)})()};e.addEventListener("click",(e=>{if(n("Загрузка, ожидайте..."),e.preventDefault(),(e=>{let t=!0;return e.forEach((e=>{const r=e.getAttribute("name");e.classList.remove("error"),"tel"===r&&(l.test(e.value.trim())||e.value.trim().length<6)&&(t=!1,e.classList.add("error"),n("Ошибка =(","error"))})),t})(c)){const e={};e.phone=r.querySelector('[name="tel"]').value,r.querySelector('[name="fio"]').value.length>0&&(e.name=r.querySelector('[name="fio"]').value),((e,t)=>{fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw Error(`Сервер временно недоступен: ${e.status}`);return e.json()})).then((e=>{s.resetForm(),n("Спасибо! Данные отправлены!","success")})).catch((e=>{n(e.message,"error"),s.resetForm()}))})(0,e)}})),c.forEach((e=>{e.addEventListener("input",(e=>{e.currentTarget.classList.remove("error"),"fio"===e.currentTarget.getAttribute("name")&&(e.currentTarget.value=e.currentTarget.value.replace(o,"")),"tel"===e.currentTarget.getAttribute("name")&&(e.currentTarget.value=e.currentTarget.value.replace(l,""))}))}))})()})();